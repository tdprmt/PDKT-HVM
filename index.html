<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panduan PDKT High Value Man - Formula Anti-Ghosting</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    
    <style>
        /* Menggunakan font Inter sebagai default */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0D1117; /* Warna dasar yang lebih deep */
            color: #E6EDF3; /* Warna teks yang lebih soft */
            scroll-behavior: smooth;
        }
        /* Custom gradient untuk highlight */
        .text-gradient {
            background: linear-gradient(to right, #FBBF24, #F8AF3A);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .cta-button {
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px 0 rgba(251, 191, 36, 0.3);
            background: linear-gradient(to right, #FBBF24, #F59E0B);
        }
        .cta-button:hover {
            transform: translateY(-4px);
            box-shadow: 0 6px 25px 0 rgba(251, 191, 36, 0.5);
        }
        /* Animasi fade-in saat scroll */
        .fade-in-section {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .fade-in-section.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        .glass-card {
            background: rgba(31, 41, 55, 0.3); /* bg-gray-800 with opacity */
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        /* Styling untuk fitur AI */
        #ai-result-box {
            white-space: pre-wrap; /* Agar format teks dari AI terjaga */
        }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #FBBF24;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100">

    <!-- Header -->
    <header class="py-4 px-6 md:px-12 fixed top-0 left-0 right-0 bg-opacity-70 backdrop-blur-lg z-50" style="background-color: #0D1117;">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-xl font-bold text-white">Masculinity<span class="text-amber-400">Characters</span></h1>
            <a href="#beli" class="cta-button text-gray-900 font-bold py-2 px-6 rounded-lg">
                Dapatkan E-Book
            </a>
        </div>
    </header>

    <main>
        <!-- Hero Section -->
        <section id="hero" class="pt-32 pb-16 md:pt-40 md:pb-24 relative overflow-hidden">
             <!-- Background Glow -->
            <div class="absolute top-0 left-1/2 -translate-x-1/2 w-[800px] h-[800px] bg-amber-500/10 rounded-full blur-3xl -z-10"></div>
            <div class="container mx-auto px-6 md:px-12 fade-in-section">
                <div class="flex flex-col md:flex-row items-center gap-12">
                    <!-- Teks Kiri -->
                    <div class="md:w-1/2 text-center md:text-left">
                        <h2 class="text-4xl md:text-5xl lg:text-6xl font-black leading-tight mb-4">
                            Berhenti Jadi <span class="text-gradient">"Cowok Baik."</span><br> Saatnya Jadi <span class="text-white">Main Character.</span>
                        </h2>
                        <p class="text-lg text-gray-300 mb-8 max-w-xl mx-auto md:mx-0">
                            Bongkar rahasia wanita, tempa kepercayaan diri sejati, dan kuasai formula anti-ghosting untuk menjadi Pria High Value yang selalu diidamkan.
                        </p>
                        <a href="#beli" class="cta-button inline-block text-gray-900 font-bold text-lg py-4 px-10 rounded-lg">
                            Saya Mau Manualnya!
                        </a>
                    </div>
                    <!-- Gambar Kanan (URL E-Book Cover diperbaiki) -->
                    <div class="md:w-1/2 flex justify-center">
                        <img src="https://i.postimg.cc/k5yL4xVb/ebook-cover.jpg" alt="Cover E-Book Panduan PDKT High Value Man" class="w-2/3 md:w-3/4 lg:w-2/3 rounded-lg shadow-2xl shadow-amber-900/20 transform transition duration-500 hover:scale-105">
                    </div>
                </div>
            </div>
        </section>

        <!-- Problem Section -->
        <section id="problem" class="py-16 md:py-24 bg-gray-900/50">
            <div class="container mx-auto px-6 md:px-12 text-center fade-in-section">
                <h3 class="text-3xl md:text-4xl font-bold mb-4">Lo Capek Di-Ghosting?</h3>
                <p class="text-gray-400 mb-12 max-w-3xl mx-auto">Lelah jadi "cowo baik" yang selalu berakhir jadi teman curhat? Lo udah ngikutin semua saran tapi dia tetap memilih cowok brengsek. Lo frustrasi, lo bingung, lo mulai mikir apa yang salah sama diri lo.</p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-left mb-12">
                    <div class="glass-card p-6 rounded-lg">
                        <h4 class="font-bold text-xl mb-2 text-amber-400">Frustrasi & Bingung</h4>
                        <p class="text-gray-300">Selalu ada buat dia, bersikap baik, tapi akhirnya cuma dianggap teman. Lo mulai berpikir apa yang salah dengan diri lo.</p>
                    </div>
                    <div class="glass-card p-6 rounded-lg">
                        <h4 class="font-bold text-xl mb-2 text-amber-400">Jalan Pintas Gagal</h4>
                        <p class="text-gray-300">Nonton tips murahan dari TikTok, menghafal "jurus" chat, atau mencoba jadi orang lain, tapi hasilnya lo keliatan aneh dan putus asa.</p>
                    </div>
                    <div class="glass-card p-6 rounded-lg">
                        <h4 class="font-bold text-xl mb-2 text-amber-400">Selalu Kalah Saing</h4>
                        <p class="text-gray-300">Dia tetap memilih cowok yang kelihatannya cuek dan nggak peduli. Lo nggak paham "aturan main" yang sebenarnya.</p>
                    </div>
                </div>
                <p class="text-5xl font-black text-amber-400 tracking-widest">STOP.</p>
            </div>
        </section>
        
        <!-- Gemini AI Feature Section -->
        <section id="ai-feature" class="py-16 md:py-24">
            <div class="container mx-auto px-6 md:px-12 text-center fade-in-section">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">Penasaran Kenapa Chat Lo Gagal?</h2>
                <p class="text-lg text-gray-300 max-w-3xl mx-auto mb-8">
                    Coba fitur <span class="text-gradient font-bold">"Cek Aura PDKT"</span>. Masukkan contoh chat pembuka lo dan biarkan AI menganalisisnya dari sudut pandang High Value Man.
                </p>
                <div class="max-w-2xl mx-auto bg-gray-900/50 p-8 rounded-lg border border-gray-700">
                    <textarea id="ai-prompt-input" class="w-full h-28 bg-gray-800 text-white p-4 rounded-lg border border-gray-600 focus:ring-2 focus:ring-amber-400 focus:outline-none" placeholder="Contoh: 'Hai, lagi apa? Boleh kenalan nggak?'"></textarea>
                    <button id="ai-analyze-button" class="cta-button w-full mt-4 text-gray-900 font-bold py-3 px-6 rounded-lg flex items-center justify-center">
                        <span id="ai-button-text">✨ Analisis dengan AI</span>
                        <div id="ai-loader" class="loader hidden"></div>
                    </button>
                    <div id="ai-result-container" class="mt-6 text-left hidden">
                        <h4 class="font-bold text-xl mb-3 text-white">Hasil Analisis AI:</h4>
                        <div id="ai-result-box" class="glass-card p-4 rounded-lg text-gray-300"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Solution Section -->
        <section id="solution" class="py-16 md:py-24 bg-gray-900/50">
            <div class="container mx-auto px-6 md:px-12 text-center fade-in-section">
                 <h2 class="text-3xl md:text-4xl font-bold mb-6">Ini Bukan Lagi Sekadar Buku PDKT.</h2>
                 <p class="text-lg text-gray-300 max-w-4xl mx-auto leading-relaxed">
                    Buku ini akan membongkar rahasia wanita yang tak akan pernah mereka katakan langsung—mulai dari pemikiran, sinyal, hingga apa yang sebenarnya mereka cari. Ini adalah panduan untuk menjadi <span class="font-bold text-amber-400">Pria High Value yang otentik.</span> Sebuah manual untuk menaklukkan diri lo sendiri terlebih dahulu, karena saat seorang pria berhasil menaklukkan dirinya, dia akan mampu menaklukkan dunia dan seisinya, <span class="font-bold text-white">termasuk wanita.</span>
                 </p>
            </div>
        </section>

        <!-- What You'll Learn Section -->
        <section id="features" class="py-16 md:py-24">
            <div class="container mx-auto px-6 md:px-12 fade-in-section">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold">Di Dalam E-Book Ini, Lo Akan Menemukan:</h2>
                </div>
                <div class="max-w-5xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-x-16 gap-y-10">
                    <!-- Feature Item (Ikon diganti) -->
                    <div class="flex items-start space-x-4">
                        <svg class="w-7 h-7 text-amber-400 flex-shrink-0 mt-1" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.362 5.214A8.252 8.252 0 0112 21 8.25 8.25 0 016.038 7.048 8.287 8.287 0 009 9.6a8.983 8.983 0 013.362-3.797A8.333 8.333 0 0112 6c1.23 0 2.394.246 3.362.668zM12 15a3 3 0 100-6 3 3 0 000 6z" /></svg>
                        <div>
                            <h4 class="font-semibold text-lg text-white">"Sisi Gelap" Pria</h4>
                            <p class="text-gray-400">Membongkar secara brutal kenapa "cowo baik" selalu kalah dan menemukan "sisi gelap" yang nggak pernah lo sadari ada di dalam diri lo.</p>
                        </div>
                    </div>
                    <!-- Feature Item (Ikon diganti) -->
                    <div class="flex items-start space-x-4">
                        <svg class="w-7 h-7 text-amber-400 flex-shrink-0 mt-1" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" /></svg>
                        <div>
                            <h4 class="font-semibold text-lg text-white">Pusat Gravitasi Diri</h4>
                            <p class="text-gray-400">Membangun "pusat gravitasi" dalam hidup lo yang akan membuat wanita berkualitas secara alami tertarik ke orbit lo, bukan sebaliknya.</p>
                        </div>
                    </div>
                    <!-- Feature Item (Ikon diganti) -->
                    <div class="flex items-start space-x-4">
                        <svg class="w-7 h-7 text-amber-400 flex-shrink-0 mt-1" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286zm0 13.036h.008v.008h-.008v-.008z" /></svg>
                        <div>
                            <h4 class="font-semibold text-lg text-white">Kepercayaan Diri Anti Goyah</h4>
                            <p class="text-gray-400">Menempa kepercayaan diri yang lahir dari BUKTI nyata, bukan dari omong kosong motivasi.</p>
                        </div>
                    </div>
                    <!-- Feature Item (Ikon diganti) -->
                    <div class="flex items-start space-x-4">
                        <svg class="w-7 h-7 text-amber-400 flex-shrink-0 mt-1" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" /></svg>
                        <div>
                            <h4 class="font-semibold text-lg text-white">Aturan Main Pasar Percintaan</h4>
                            <p class="text-gray-400">Memahami "aturan main" yang nggak pernah diajarkan di sekolah, termasuk kebenaran brutal soal Sexual Market Value (SMV).</p>
                        </div>
                    </div>
                    <!-- Feature Item (Ikon diganti) -->
                    <div class="flex items-start space-x-4">
                        <svg class="w-7 h-7 text-amber-400 flex-shrink-0 mt-1" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 1.5H8.25A2.25 2.25 0 006 3.75v16.5a2.25 2.25 0 002.25 2.25h7.5A2.25 2.25 0 0018 20.25V3.75a2.25 2.25 0 00-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3" /></svg>
                        <div>
                            <h4 class="font-semibold text-lg text-white">"Markas Digital" di Instagram</h4>
                            <p class="text-gray-400">Mengubah profil "NPC" yang membosankan menjadi aset yang bekerja 24/7 untuk memancarkan nilai lo.</p>
                        </div>
                    </div>
                    <!-- Feature Item (Ikon diganti) -->
                    <div class="flex items-start space-x-4">
                        <svg class="w-7 h-7 text-amber-400 flex-shrink-0 mt-1" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.625 9.75a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.125 1.125 0 00.121-.502 11.97 11.97 0 00-.144-2.427C13.536 12.219 12.768 12 12 12c-1.25 0-2.417.146-3.507.423z" /></svg>
                        <div>
                            <h4 class="font-semibold text-lg text-white">Formula Anti-Ghosting</h4>
                            <p class="text-gray-400">Menguasai seni percakapan yang akan membuat lo berhenti ditolak dan mulai dikejar.</p>
                        </div>
                    </div>
                     <!-- Feature Item (Ikon diganti) -->
                    <div class="flex items-start space-x-4 md:col-span-2 justify-center">
                         <div class="flex items-start space-x-4 max-w-md">
                            <svg class="w-7 h-7 text-amber-400 flex-shrink-0 mt-1" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z" /></svg>
                            <div>
                                <h4 class="font-semibold text-lg text-white">Menjaga & Memimpin Hubungan</h4>
                                <p class="text-gray-400">Cara menjaga hubungan yang sudah lo bangun, membawanya ke jenjang yang lebih serius tanpa kehilangan gairah dan rasa hormat.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Who is this for? -->
        <section class="py-16 md:py-24 bg-gray-900/50">
            <div class="container mx-auto px-6 md:px-12 fade-in-section">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold">Buku Ini Untuk Siapa?</h2>
                </div>
                <div class="flex flex-col md:flex-row justify-center gap-8">
                    <div class="md:w-1/3 glass-card p-8 rounded-lg">
                        <h4 class="font-bold text-xl mb-3 text-amber-400">Pria yang Bingung & Gagal PDKT</h4>
                        <p class="text-gray-300">Untuk lo yang muak dengan tips-tips murahan yang nggak berhasil dan siap untuk perubahan nyata.</p>
                    </div>
                    <div class="md:w-1/3 glass-card p-8 rounded-lg">
                        <h4 class="font-bold text-xl mb-3 text-amber-400">Pria yang Sudah Punya Pasangan</h4>
                        <p class="text-gray-300">Untuk lo yang merasa gairah mulai padam dan ingin belajar memimpin, menjaga rasa hormat, dan membawa hubungan ke level selanjutnya.</p>
                    </div>
                </div>
                 <p class="text-center mt-8 text-lg text-gray-300 max-w-3xl mx-auto">Intinya, untuk pria manapun yang siap berhenti mencari validasi dan <span class="font-bold text-white">mulai membangun nilai diri yang sejati.</span></p>
            </div>
        </section>

        <!-- Call to Action (CTA) Section -->
        <section id="beli" class="py-20 md:py-32">
            <div class="container mx-auto px-6 md:px-12 text-center fade-in-section">
                <h2 class="text-4xl md:text-5xl font-black leading-tight mb-4">
                    Berhenti Jadi <span class="text-gray-500">NPC.</span><br> Saatnya Jadi <span class="text-gradient">Main Character.</span>
                </h2>
                <p class="text-lg text-gray-300 mb-8 max-w-2xl mx-auto">
                    Investasi terbaik yang bisa lo lakukan adalah pada diri lo sendiri. Dapatkan manual lo sekarang dan mulai perjalanan menjadi Pria High Value.
                </p>
                <a href="#" id="buy-button" class="cta-button inline-block text-gray-900 font-bold text-xl py-5 px-12 rounded-lg">
                    Dapatkan Manual Lo Sekarang!
                </a>
                <p class="mt-4 text-gray-400">Hanya <span class="font-bold text-white">Rp 100.000</span> untuk investasi seumur hidup.</p>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="py-8 bg-black/50">
        <div class="container mx-auto px-6 md:px-12 text-center text-gray-500">
            <p>&copy; 2025 Masculinitycharacters. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        // Script untuk notifikasi demo
        const buyButton = document.getElementById('buy-button');
        if (buyButton) {
            buyButton.addEventListener('click', function(event) {
                event.preventDefault();
                showNotification();
            });
        }

        function showNotification() {
            const existingNotification = document.querySelector('.demo-notification');
            if (existingNotification) {
                existingNotification.remove();
            }

            const notification = document.createElement('div');
            notification.className = 'demo-notification';
            notification.textContent = 'Tombol ini hanya untuk demo. Integrasikan dengan payment gateway pilihan Anda!';
            Object.assign(notification.style, {
                position: 'fixed',
                bottom: '20px',
                left: '50%',
                transform: 'translateX(-50%)',
                backgroundColor: '#1F2937',
                color: '#FBBF24',
                padding: '16px 24px',
                borderRadius: '8px',
                boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',
                zIndex: '1000',
                opacity: '0',
                transition: 'opacity 0.5s ease'
            });

            document.body.appendChild(notification);

            setTimeout(() => { notification.style.opacity = '1'; }, 100);
            setTimeout(() => {
                notification.style.opacity = '0';
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 500);
            }, 4000);
        }

        // Script untuk animasi fade-in saat scroll
        const sections = document.querySelectorAll('.fade-in-section');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                }
            });
        }, {
            threshold: 0.1
        });

        sections.forEach(section => {
            observer.observe(section);
        });

        // --- Gemini AI Feature Script ---
        const aiPromptInput = document.getElementById('ai-prompt-input');
        const aiAnalyzeButton = document.getElementById('ai-analyze-button');
        const aiButtonText = document.getElementById('ai-button-text');
        const aiLoader = document.getElementById('ai-loader');
        const aiResultContainer = document.getElementById('ai-result-container');
        const aiResultBox = document.getElementById('ai-result-box');

        aiAnalyzeButton.addEventListener('click', async () => {
            const userInput = aiPromptInput.value.trim();
            if (!userInput) {
                aiResultBox.textContent = "Tolong masukkan teks chat atau skenario untuk dianalisis.";
                aiResultContainer.classList.remove('hidden');
                return;
            }

            // Tampilkan loader dan sembunyikan teks tombol
            aiButtonText.classList.add('hidden');
            aiLoader.classList.remove('hidden');
            aiAnalyzeButton.disabled = true;
            aiResultContainer.classList.add('hidden');

            try {
                // Prompt dirancang untuk memberikan analisis sesuai dengan tema E-Book
                const prompt = `
                    Anda adalah seorang ahli kencan dan mentor pria yang mengajarkan konsep "High Value Man".
                    Analisis teks chat PDKT berikut dari seorang pria kepada wanita: "${userInput}"

                    Berikan analisis dalam format berikut:
                    1.  **Kesan Pertama:** Jelaskan kesan yang mungkin ditimbulkan oleh chat ini (misalnya: needy, percaya diri, membosankan, menarik).
                    2.  **Potensi Masalah:** Identifikasi kelemahan utama dari pendekatan ini.
                    3.  **Saran Perbaikan (High Value Man Mindset):** Berikan 1-2 contoh alternatif chat yang lebih baik yang mencerminkan kepercayaan diri, sedikit misteri, dan tidak needy. Jelaskan mengapa alternatif tersebut lebih efektif.

                    Gunakan bahasa yang lugas, to-the-point, dan sedikit provokatif seperti seorang mentor, tapi tetap konstruktif.
                `;

                let chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
                const payload = { contents: chatHistory };
                const apiKey = ""; // API key akan di-handle oleh environment
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
                
                // Implementasi exponential backoff
                let response;
                let retries = 3;
                let delay = 1000;
                for (let i = 0; i < retries; i++) {
                    response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    if (response.ok) break;
                    await new Promise(res => setTimeout(res, delay));
                    delay *= 2;
                }

                if (!response.ok) {
                    throw new Error('Gagal menghubungi AI setelah beberapa kali percobaan.');
                }

                const result = await response.json();
                
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    aiResultBox.textContent = text;
                } else {
                    aiResultBox.textContent = "Maaf, AI tidak dapat memberikan analisis saat ini. Coba lagi nanti.";
                    console.error("Unexpected API response structure:", result);
                }

            } catch (error) {
                console.error('Error calling Gemini API:', error);
                aiResultBox.textContent = "Terjadi kesalahan saat menganalisis. Silakan coba beberapa saat lagi.";
            } finally {
                // Kembalikan tombol ke keadaan semula
                aiButtonText.classList.remove('hidden');
                aiLoader.classList.add('hidden');
                aiAnalyzeButton.disabled = false;
                aiResultContainer.classList.remove('hidden');
            }
        });
    </script>

</body>
</html>
